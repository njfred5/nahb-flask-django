{% extends "base.html" %}

{% block content %}
<h1 class="page-title">Edit Page {{ page.id }}</h1>

<div class="form-card">
    <form method="post">
        {% csrf_token %}

        <label class="form-label">Page Text</label>
        <textarea name="text" rows="6" class="form-input">{{ page.text }}</textarea>

        <label class="checkbox-label">
            <input type="checkbox" name="is_ending" {% if page.is_ending %}checked{% endif %}>
            This page is an ending
        </label>

        <label class="form-label">Ending Label (optional)</label>
        <input type="text" name="ending_label" class="form-input" value="{{ page.ending_label }}">

        <button type="submit" class="btn-primary">Save Changes</button>
    </form>
</div>

<hr class="divider">

<h2 class="section-title">Choices</h2>

<ul class="choice-list-editor">
    {% if page.choices %}
        {% for c in page.choices %}
            <li class="choice-editor-item">
                <span class="choice-text">{{ c.text }}</span>
                <span class="choice-arrow">â†’ Page {{ c.next_page_id }}</span>
            </li>
        {% endfor %}
    {% else %}
        <li class="choice-editor-item empty">No choices yet.</li>
    {% endif %}
</ul>

<a class="btn-secondary" href="{% url 'stories:create_choice' page.id %}">Add Choice</a>

{% endblock %}
